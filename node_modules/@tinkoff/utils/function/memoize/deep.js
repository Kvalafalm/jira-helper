"use strict";

var memoizeWith = require('./with');

var createCacheFrom = require('./createCache');

/**
 * Memoize function with multiply arguments of any type.
 * Use it when you need deep equality for cache lookup.
 *
 * @param {Function} fn
 * @returns {Function}
 * @example
 *     const addFlag = obj => ({...obj, flag: true });
 *     const memoize = memoizeDeep(addFlag));
 *     const test = {};
 *     memoize(test, {test: 2}); // from addFlag call
 *     memoize(test, {test: 2}); // from cache
 *     test.id = 123;
 *     memoize(test); // from addFlag call
 */
module.exports = memoizeWith(createCacheFrom, function () {
  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }

  return JSON.stringify(args);
});